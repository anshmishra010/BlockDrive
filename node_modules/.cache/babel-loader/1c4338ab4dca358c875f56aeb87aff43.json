{"ast":null,"code":"var ERROR_MSG_INPUT = 'Input must be an string, Buffer or Uint8Array'; // For convenience, let people hash a string, not just a Uint8Array\n\nfunction normalizeInput(input) {\n  var ret;\n\n  if (input instanceof Uint8Array) {\n    ret = input;\n  } else if (input instanceof Buffer) {\n    ret = new Uint8Array(input);\n  } else if (typeof input === 'string') {\n    ret = new Uint8Array(Buffer.from(input, 'utf8'));\n  } else {\n    throw new Error(ERROR_MSG_INPUT);\n  }\n\n  return ret;\n} // Converts a Uint8Array to a hexadecimal string\n// For example, toHex([255, 0, 255]) returns \"ff00ff\"\n\n\nfunction toHex(bytes) {\n  return Array.prototype.map.call(bytes, function (n) {\n    return (n < 16 ? '0' : '') + n.toString(16);\n  }).join('');\n} // Converts any value in [0...2^32-1] to an 8-character hex string\n\n\nfunction uint32ToHex(val) {\n  return (0x100000000 + val).toString(16).substring(1);\n} // For debugging: prints out hash state in the same format as the RFC\n// sample computation exactly, so that you can diff\n\n\nfunction debugPrint(label, arr, size) {\n  var msg = '\\n' + label + ' = ';\n\n  for (var i = 0; i < arr.length; i += 2) {\n    if (size === 32) {\n      msg += uint32ToHex(arr[i]).toUpperCase();\n      msg += ' ';\n      msg += uint32ToHex(arr[i + 1]).toUpperCase();\n    } else if (size === 64) {\n      msg += uint32ToHex(arr[i + 1]).toUpperCase();\n      msg += uint32ToHex(arr[i]).toUpperCase();\n    } else throw new Error('Invalid size ' + size);\n\n    if (i % 6 === 4) {\n      msg += '\\n' + new Array(label.length + 4).join(' ');\n    } else if (i < arr.length - 2) {\n      msg += ' ';\n    }\n  }\n\n  console.log(msg);\n} // For performance testing: generates N bytes of input, hashes M times\n// Measures and prints MB/second hash performance each time\n\n\nfunction testSpeed(hashFn, N, M) {\n  var startMs = new Date().getTime();\n  var input = new Uint8Array(N);\n\n  for (var i = 0; i < N; i++) {\n    input[i] = i % 256;\n  }\n\n  var genMs = new Date().getTime();\n  console.log('Generated random input in ' + (genMs - startMs) + 'ms');\n  startMs = genMs;\n\n  for (i = 0; i < M; i++) {\n    var hashHex = hashFn(input);\n    var hashMs = new Date().getTime();\n    var ms = hashMs - startMs;\n    startMs = hashMs;\n    console.log('Hashed in ' + ms + 'ms: ' + hashHex.substring(0, 20) + '...');\n    console.log(Math.round(N / (1 << 20) / (ms / 1000) * 100) / 100 + ' MB PER SECOND');\n  }\n}\n\nmodule.exports = {\n  normalizeInput: normalizeInput,\n  toHex: toHex,\n  debugPrint: debugPrint,\n  testSpeed: testSpeed\n};","map":{"version":3,"sources":["C:/Users/anshm/blockdrive/node_modules/blakejs/util.js"],"names":["ERROR_MSG_INPUT","normalizeInput","input","ret","Uint8Array","Buffer","from","Error","toHex","bytes","Array","prototype","map","call","n","toString","join","uint32ToHex","val","substring","debugPrint","label","arr","size","msg","i","length","toUpperCase","console","log","testSpeed","hashFn","N","M","startMs","Date","getTime","genMs","hashHex","hashMs","ms","Math","round","module","exports"],"mappings":"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","sourcesContent":["var ERROR_MSG_INPUT = 'Input must be an string, Buffer or Uint8Array'\n\n// For convenience, let people hash a string, not just a Uint8Array\nfunction normalizeInput (input) {\n  var ret\n  if (input instanceof Uint8Array) {\n    ret = input\n  } else if (input instanceof Buffer) {\n    ret = new Uint8Array(input)\n  } else if (typeof (input) === 'string') {\n    ret = new Uint8Array(Buffer.from(input, 'utf8'))\n  } else {\n    throw new Error(ERROR_MSG_INPUT)\n  }\n  return ret\n}\n\n// Converts a Uint8Array to a hexadecimal string\n// For example, toHex([255, 0, 255]) returns \"ff00ff\"\nfunction toHex (bytes) {\n  return Array.prototype.map.call(bytes, function (n) {\n    return (n < 16 ? '0' : '') + n.toString(16)\n  }).join('')\n}\n\n// Converts any value in [0...2^32-1] to an 8-character hex string\nfunction uint32ToHex (val) {\n  return (0x100000000 + val).toString(16).substring(1)\n}\n\n// For debugging: prints out hash state in the same format as the RFC\n// sample computation exactly, so that you can diff\nfunction debugPrint (label, arr, size) {\n  var msg = '\\n' + label + ' = '\n  for (var i = 0; i < arr.length; i += 2) {\n    if (size === 32) {\n      msg += uint32ToHex(arr[i]).toUpperCase()\n      msg += ' '\n      msg += uint32ToHex(arr[i + 1]).toUpperCase()\n    } else if (size === 64) {\n      msg += uint32ToHex(arr[i + 1]).toUpperCase()\n      msg += uint32ToHex(arr[i]).toUpperCase()\n    } else throw new Error('Invalid size ' + size)\n    if (i % 6 === 4) {\n      msg += '\\n' + new Array(label.length + 4).join(' ')\n    } else if (i < arr.length - 2) {\n      msg += ' '\n    }\n  }\n  console.log(msg)\n}\n\n// For performance testing: generates N bytes of input, hashes M times\n// Measures and prints MB/second hash performance each time\nfunction testSpeed (hashFn, N, M) {\n  var startMs = new Date().getTime()\n\n  var input = new Uint8Array(N)\n  for (var i = 0; i < N; i++) {\n    input[i] = i % 256\n  }\n  var genMs = new Date().getTime()\n  console.log('Generated random input in ' + (genMs - startMs) + 'ms')\n  startMs = genMs\n\n  for (i = 0; i < M; i++) {\n    var hashHex = hashFn(input)\n    var hashMs = new Date().getTime()\n    var ms = hashMs - startMs\n    startMs = hashMs\n    console.log('Hashed in ' + ms + 'ms: ' + hashHex.substring(0, 20) + '...')\n    console.log(Math.round(N / (1 << 20) / (ms / 1000) * 100) / 100 + ' MB PER SECOND')\n  }\n}\n\nmodule.exports = {\n  normalizeInput: normalizeInput,\n  toHex: toHex,\n  debugPrint: debugPrint,\n  testSpeed: testSpeed\n}\n"]},"metadata":{},"sourceType":"script"}