{"ast":null,"code":"'use strict'; //read a number of items and then stop.\n\nmodule.exports = function take(test, opts) {\n  opts = opts || {};\n  var last = opts.last || false; // whether the first item for which !test(item) should still pass\n\n  var ended = false;\n\n  if ('number' === typeof test) {\n    last = true;\n    var n = test;\n\n    test = function test() {\n      return --n;\n    };\n  }\n\n  return function (read) {\n    function terminate(cb) {\n      read(true, function (err) {\n        last = false;\n        cb(err || true);\n      });\n    }\n\n    return function (end, cb) {\n      if (ended && !end) last ? terminate(cb) : cb(ended);else if (ended = end) read(ended, cb);else read(null, function (end, data) {\n        if (ended = ended || end) {\n          //last ? terminate(cb) :\n          cb(ended);\n        } else if (!test(data)) {\n          ended = true;\n          last ? cb(null, data) : terminate(cb);\n        } else cb(null, data);\n      });\n    };\n  };\n};","map":{"version":3,"sources":["C:/Users/anshm/blockdrive/node_modules/pull-stream/throughs/take.js"],"names":["module","exports","take","test","opts","last","ended","n","read","terminate","cb","err","end","data"],"mappings":"AAAA,a,CAEA;;AACAA,MAAM,CAACC,OAAP,GAAiB,SAASC,IAAT,CAAeC,IAAf,EAAqBC,IAArB,EAA2B;AAC1CA,EAAAA,IAAI,GAAGA,IAAI,IAAI,EAAf;AACA,MAAIC,IAAI,GAAGD,IAAI,CAACC,IAAL,IAAa,KAAxB,CAF0C,CAEZ;;AAC9B,MAAIC,KAAK,GAAG,KAAZ;;AACA,MAAG,aAAa,OAAOH,IAAvB,EAA6B;AAC3BE,IAAAA,IAAI,GAAG,IAAP;AACA,QAAIE,CAAC,GAAGJ,IAAR;;AAAcA,IAAAA,IAAI,GAAG,gBAAY;AAC/B,aAAO,EAAEI,CAAT;AACD,KAFa;AAGf;;AAED,SAAO,UAAUC,IAAV,EAAgB;AAErB,aAASC,SAAT,CAAoBC,EAApB,EAAwB;AACtBF,MAAAA,IAAI,CAAC,IAAD,EAAO,UAAUG,GAAV,EAAe;AACxBN,QAAAA,IAAI,GAAG,KAAP;AAAcK,QAAAA,EAAE,CAACC,GAAG,IAAI,IAAR,CAAF;AACf,OAFG,CAAJ;AAGD;;AAED,WAAO,UAAUC,GAAV,EAAeF,EAAf,EAAmB;AACxB,UAAGJ,KAAK,IAAI,CAACM,GAAb,EAAkBP,IAAI,GAAGI,SAAS,CAACC,EAAD,CAAZ,GAAmBA,EAAE,CAACJ,KAAD,CAAzB,CAAlB,KACK,IAAGA,KAAK,GAAGM,GAAX,EAAgBJ,IAAI,CAACF,KAAD,EAAQI,EAAR,CAAJ,CAAhB,KAEHF,IAAI,CAAC,IAAD,EAAO,UAAUI,GAAV,EAAeC,IAAf,EAAqB;AAC9B,YAAGP,KAAK,GAAGA,KAAK,IAAIM,GAApB,EAAyB;AACvB;AACAF,UAAAA,EAAE,CAACJ,KAAD,CAAF;AACD,SAHD,MAIK,IAAG,CAACH,IAAI,CAACU,IAAD,CAAR,EAAgB;AACnBP,UAAAA,KAAK,GAAG,IAAR;AACAD,UAAAA,IAAI,GAAGK,EAAE,CAAC,IAAD,EAAOG,IAAP,CAAL,GAAoBJ,SAAS,CAACC,EAAD,CAAjC;AACD,SAHI,MAKHA,EAAE,CAAC,IAAD,EAAOG,IAAP,CAAF;AACH,OAXG,CAAJ;AAYH,KAhBD;AAiBD,GAzBD;AA0BD,CArCD","sourcesContent":["'use strict'\n\n//read a number of items and then stop.\nmodule.exports = function take (test, opts) {\n  opts = opts || {}\n  var last = opts.last || false // whether the first item for which !test(item) should still pass\n  var ended = false\n  if('number' === typeof test) {\n    last = true\n    var n = test; test = function () {\n      return --n\n    }\n  }\n\n  return function (read) {\n\n    function terminate (cb) {\n      read(true, function (err) {\n        last = false; cb(err || true)\n      })\n    }\n\n    return function (end, cb) {\n      if(ended && !end) last ? terminate(cb) : cb(ended)\n      else if(ended = end) read(ended, cb)\n      else\n        read(null, function (end, data) {\n          if(ended = ended || end) {\n            //last ? terminate(cb) :\n            cb(ended)\n          }\n          else if(!test(data)) {\n            ended = true\n            last ? cb(null, data) : terminate(cb)\n          }\n          else\n            cb(null, data)\n        })\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"script"}