{"ast":null,"code":"'use strict';\n\nvar drain = require('./drain');\n\nmodule.exports = function reduce(reducer, acc, cb) {\n  if (!cb) cb = acc, acc = null;\n  var sink = drain(function (data) {\n    acc = reducer(acc, data);\n  }, function (err) {\n    cb(err, acc);\n  });\n  if (arguments.length === 2) return function (source) {\n    source(null, function (end, data) {\n      //if ended immediately, and no initial...\n      if (end) return cb(end === true ? null : end);\n      acc = data;\n      sink(source);\n    });\n  };else return sink;\n};","map":{"version":3,"sources":["C:/Users/anshm/blockdrive/node_modules/pull-stream/sinks/reduce.js"],"names":["drain","require","module","exports","reduce","reducer","acc","cb","sink","data","err","arguments","length","source","end"],"mappings":"AAAA;;AAEA,IAAIA,KAAK,GAAGC,OAAO,CAAC,SAAD,CAAnB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,SAASC,MAAT,CAAiBC,OAAjB,EAA0BC,GAA1B,EAA+BC,EAA/B,EAAoC;AACnD,MAAG,CAACA,EAAJ,EAAQA,EAAE,GAAGD,GAAL,EAAUA,GAAG,GAAG,IAAhB;AACR,MAAIE,IAAI,GAAGR,KAAK,CAAC,UAAUS,IAAV,EAAgB;AAC/BH,IAAAA,GAAG,GAAGD,OAAO,CAACC,GAAD,EAAMG,IAAN,CAAb;AACD,GAFe,EAEb,UAAUC,GAAV,EAAe;AAChBH,IAAAA,EAAE,CAACG,GAAD,EAAMJ,GAAN,CAAF;AACD,GAJe,CAAhB;AAKA,MAAIK,SAAS,CAACC,MAAV,KAAqB,CAAzB,EACE,OAAO,UAAUC,MAAV,EAAkB;AACvBA,IAAAA,MAAM,CAAC,IAAD,EAAO,UAAUC,GAAV,EAAeL,IAAf,EAAqB;AAChC;AACA,UAAGK,GAAH,EAAQ,OAAOP,EAAE,CAACO,GAAG,KAAK,IAAR,GAAe,IAAf,GAAsBA,GAAvB,CAAT;AACRR,MAAAA,GAAG,GAAGG,IAAN;AAAYD,MAAAA,IAAI,CAACK,MAAD,CAAJ;AACb,KAJK,CAAN;AAKD,GAND,CADF,KASE,OAAOL,IAAP;AACH,CAjBD","sourcesContent":["'use strict'\n\nvar drain = require('./drain')\n\nmodule.exports = function reduce (reducer, acc, cb ) {\n  if(!cb) cb = acc, acc = null\n  var sink = drain(function (data) {\n    acc = reducer(acc, data)\n  }, function (err) {\n    cb(err, acc)\n  })\n  if (arguments.length === 2)\n    return function (source) {\n      source(null, function (end, data) {\n        //if ended immediately, and no initial...\n        if(end) return cb(end === true ? null : end)\n        acc = data; sink(source)\n      })\n    }\n  else\n    return sink\n}\n"]},"metadata":{},"sourceType":"script"}