{"ast":null,"code":"'use strict';\n\nvar toPull = require('stream-to-pull-stream');\n\nvar deferred = require('pull-defer');\n\nvar pump = require('pump');\n\nvar moduleConfig = require('./utils/module-config');\n\nvar PingMessageStream = require('./utils/ping-message-stream');\n\nmodule.exports = function (arg) {\n  var send = moduleConfig(arg);\n  return function (id) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    // Default number of packtes to 1\n    if (!opts.n && !opts.count) {\n      opts.n = 1;\n    }\n\n    var request = {\n      path: 'ping',\n      args: id,\n      qs: opts\n    };\n    var p = deferred.source();\n    var response = new PingMessageStream();\n    send(request, function (err, stream) {\n      if (err) {\n        return p.abort(err);\n      }\n\n      pump(stream, response);\n      p.resolve(toPull.source(response));\n    });\n    return p;\n  };\n};","map":{"version":3,"sources":["C:/Users/anshm/blockdrive/node_modules/ipfs-http-client/src/ping-pull-stream.js"],"names":["toPull","require","deferred","pump","moduleConfig","PingMessageStream","module","exports","arg","send","id","opts","n","count","request","path","args","qs","p","source","response","err","stream","abort","resolve"],"mappings":"AAAA;;AAEA,IAAMA,MAAM,GAAGC,OAAO,CAAC,uBAAD,CAAtB;;AACA,IAAMC,QAAQ,GAAGD,OAAO,CAAC,YAAD,CAAxB;;AACA,IAAME,IAAI,GAAGF,OAAO,CAAC,MAAD,CAApB;;AACA,IAAMG,YAAY,GAAGH,OAAO,CAAC,uBAAD,CAA5B;;AACA,IAAMI,iBAAiB,GAAGJ,OAAO,CAAC,6BAAD,CAAjC;;AAEAK,MAAM,CAACC,OAAP,GAAiB,UAACC,GAAD,EAAS;AACxB,MAAMC,IAAI,GAAGL,YAAY,CAACI,GAAD,CAAzB;AAEA,SAAO,UAACE,EAAD,EAAmB;AAAA,QAAdC,IAAc,uEAAP,EAAO;;AACxB;AACA,QAAI,CAACA,IAAI,CAACC,CAAN,IAAW,CAACD,IAAI,CAACE,KAArB,EAA4B;AAC1BF,MAAAA,IAAI,CAACC,CAAL,GAAS,CAAT;AACD;;AACD,QAAME,OAAO,GAAG;AACdC,MAAAA,IAAI,EAAE,MADQ;AAEdC,MAAAA,IAAI,EAAEN,EAFQ;AAGdO,MAAAA,EAAE,EAAEN;AAHU,KAAhB;AAKA,QAAMO,CAAC,GAAGhB,QAAQ,CAACiB,MAAT,EAAV;AACA,QAAMC,QAAQ,GAAG,IAAIf,iBAAJ,EAAjB;AAEAI,IAAAA,IAAI,CAACK,OAAD,EAAU,UAACO,GAAD,EAAMC,MAAN,EAAiB;AAC7B,UAAID,GAAJ,EAAS;AAAE,eAAOH,CAAC,CAACK,KAAF,CAAQF,GAAR,CAAP;AAAqB;;AAEhClB,MAAAA,IAAI,CAACmB,MAAD,EAASF,QAAT,CAAJ;AACAF,MAAAA,CAAC,CAACM,OAAF,CAAUxB,MAAM,CAACmB,MAAP,CAAcC,QAAd,CAAV;AACD,KALG,CAAJ;AAOA,WAAOF,CAAP;AACD,GArBD;AAsBD,CAzBD","sourcesContent":["'use strict'\n\nconst toPull = require('stream-to-pull-stream')\nconst deferred = require('pull-defer')\nconst pump = require('pump')\nconst moduleConfig = require('./utils/module-config')\nconst PingMessageStream = require('./utils/ping-message-stream')\n\nmodule.exports = (arg) => {\n  const send = moduleConfig(arg)\n\n  return (id, opts = {}) => {\n    // Default number of packtes to 1\n    if (!opts.n && !opts.count) {\n      opts.n = 1\n    }\n    const request = {\n      path: 'ping',\n      args: id,\n      qs: opts\n    }\n    const p = deferred.source()\n    const response = new PingMessageStream()\n\n    send(request, (err, stream) => {\n      if (err) { return p.abort(err) }\n\n      pump(stream, response)\n      p.resolve(toPull.source(response))\n    })\n\n    return p\n  }\n}\n"]},"metadata":{},"sourceType":"script"}