{"ast":null,"code":"var Promise = require('promise');\n\nvar isPromise = require('is-promise');\n\nvar nextTick;\nif (typeof setImmediate === 'function') nextTick = setImmediate;else if (typeof process === 'object' && process && process.nextTick) nextTick = process.nextTick;else nextTick = function nextTick(cb) {\n  setTimeout(cb, 0);\n};\nmodule.exports = nodeify;\n\nfunction nodeify(promise, cb) {\n  if (typeof cb !== 'function') return promise;\n  return promise.then(function (res) {\n    nextTick(function () {\n      cb(null, res);\n    });\n  }, function (err) {\n    nextTick(function () {\n      cb(err);\n    });\n  });\n}\n\nfunction nodeifyThis(cb) {\n  return nodeify(this, cb);\n}\n\nnodeify.extend = extend;\nnodeify.Promise = NodeifyPromise;\n\nfunction extend(prom) {\n  if (prom && isPromise(prom)) {\n    prom.nodeify = nodeifyThis;\n    var then = prom.then;\n\n    prom.then = function () {\n      return extend(then.apply(this, arguments));\n    };\n\n    return prom;\n  } else if (typeof prom === 'function') {\n    prom.prototype.nodeify = nodeifyThis;\n  } else {\n    Promise.prototype.nodeify = nodeifyThis;\n  }\n}\n\nfunction NodeifyPromise(fn) {\n  if (!(this instanceof NodeifyPromise)) {\n    return new NodeifyPromise(fn);\n  }\n\n  Promise.call(this, fn);\n  extend(this);\n}\n\nNodeifyPromise.prototype = Object.create(Promise.prototype);\nNodeifyPromise.prototype.constructor = NodeifyPromise;","map":{"version":3,"sources":["C:/Users/anshm/blockdrive/node_modules/nodeify/index.js"],"names":["Promise","require","isPromise","nextTick","setImmediate","process","cb","setTimeout","module","exports","nodeify","promise","then","res","err","nodeifyThis","extend","NodeifyPromise","prom","apply","arguments","prototype","fn","call","Object","create","constructor"],"mappings":"AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,YAAD,CAAvB;;AAEA,IAAIE,QAAJ;AACA,IAAI,OAAOC,YAAP,KAAwB,UAA5B,EAAwCD,QAAQ,GAAGC,YAAX,CAAxC,KACK,IAAI,OAAOC,OAAP,KAAmB,QAAnB,IAA+BA,OAA/B,IAA0CA,OAAO,CAACF,QAAtD,EAAgEA,QAAQ,GAAGE,OAAO,CAACF,QAAnB,CAAhE,KACAA,QAAQ,GAAG,kBAAUG,EAAV,EAAc;AAAEC,EAAAA,UAAU,CAACD,EAAD,EAAK,CAAL,CAAV;AAAmB,CAA9C;AAELE,MAAM,CAACC,OAAP,GAAiBC,OAAjB;;AACA,SAASA,OAAT,CAAiBC,OAAjB,EAA0BL,EAA1B,EAA8B;AAC5B,MAAI,OAAOA,EAAP,KAAc,UAAlB,EAA8B,OAAOK,OAAP;AAC9B,SAAOA,OAAO,CACXC,IADI,CACC,UAAUC,GAAV,EAAe;AACnBV,IAAAA,QAAQ,CAAC,YAAY;AACnBG,MAAAA,EAAE,CAAC,IAAD,EAAOO,GAAP,CAAF;AACD,KAFO,CAAR;AAGD,GALI,EAKF,UAAUC,GAAV,EAAe;AAChBX,IAAAA,QAAQ,CAAC,YAAY;AACnBG,MAAAA,EAAE,CAACQ,GAAD,CAAF;AACD,KAFO,CAAR;AAGD,GATI,CAAP;AAUD;;AACD,SAASC,WAAT,CAAqBT,EAArB,EAAyB;AACvB,SAAOI,OAAO,CAAC,IAAD,EAAOJ,EAAP,CAAd;AACD;;AAEDI,OAAO,CAACM,MAAR,GAAiBA,MAAjB;AACAN,OAAO,CAACV,OAAR,GAAkBiB,cAAlB;;AAEA,SAASD,MAAT,CAAgBE,IAAhB,EAAsB;AACpB,MAAIA,IAAI,IAAIhB,SAAS,CAACgB,IAAD,CAArB,EAA6B;AAC3BA,IAAAA,IAAI,CAACR,OAAL,GAAeK,WAAf;AACA,QAAIH,IAAI,GAAGM,IAAI,CAACN,IAAhB;;AACAM,IAAAA,IAAI,CAACN,IAAL,GAAY,YAAY;AACtB,aAAOI,MAAM,CAACJ,IAAI,CAACO,KAAL,CAAW,IAAX,EAAiBC,SAAjB,CAAD,CAAb;AACD,KAFD;;AAGA,WAAOF,IAAP;AACD,GAPD,MAOO,IAAI,OAAOA,IAAP,KAAgB,UAApB,EAAgC;AACrCA,IAAAA,IAAI,CAACG,SAAL,CAAeX,OAAf,GAAyBK,WAAzB;AACD,GAFM,MAEA;AACLf,IAAAA,OAAO,CAACqB,SAAR,CAAkBX,OAAlB,GAA4BK,WAA5B;AACD;AACF;;AAED,SAASE,cAAT,CAAwBK,EAAxB,EAA4B;AAC1B,MAAI,EAAE,gBAAgBL,cAAlB,CAAJ,EAAuC;AACrC,WAAO,IAAIA,cAAJ,CAAmBK,EAAnB,CAAP;AACD;;AACDtB,EAAAA,OAAO,CAACuB,IAAR,CAAa,IAAb,EAAmBD,EAAnB;AACAN,EAAAA,MAAM,CAAC,IAAD,CAAN;AACD;;AAEDC,cAAc,CAACI,SAAf,GAA2BG,MAAM,CAACC,MAAP,CAAczB,OAAO,CAACqB,SAAtB,CAA3B;AACAJ,cAAc,CAACI,SAAf,CAAyBK,WAAzB,GAAuCT,cAAvC","sourcesContent":["var Promise = require('promise');\nvar isPromise = require('is-promise');\n\nvar nextTick;\nif (typeof setImmediate === 'function') nextTick = setImmediate\nelse if (typeof process === 'object' && process && process.nextTick) nextTick = process.nextTick\nelse nextTick = function (cb) { setTimeout(cb, 0) }\n\nmodule.exports = nodeify;\nfunction nodeify(promise, cb) {\n  if (typeof cb !== 'function') return promise;\n  return promise\n    .then(function (res) {\n      nextTick(function () {\n        cb(null, res);\n      });\n    }, function (err) {\n      nextTick(function () {\n        cb(err);\n      });\n    });\n}\nfunction nodeifyThis(cb) {\n  return nodeify(this, cb);\n}\n\nnodeify.extend = extend;\nnodeify.Promise = NodeifyPromise;\n\nfunction extend(prom) {\n  if (prom && isPromise(prom)) {\n    prom.nodeify = nodeifyThis;\n    var then = prom.then;\n    prom.then = function () {\n      return extend(then.apply(this, arguments));\n    };\n    return prom;\n  } else if (typeof prom === 'function') {\n    prom.prototype.nodeify = nodeifyThis;\n  } else {\n    Promise.prototype.nodeify = nodeifyThis;\n  }\n}\n\nfunction NodeifyPromise(fn) {\n  if (!(this instanceof NodeifyPromise)) {\n    return new NodeifyPromise(fn);\n  }\n  Promise.call(this, fn);\n  extend(this);\n}\n\nNodeifyPromise.prototype = Object.create(Promise.prototype);\nNodeifyPromise.prototype.constructor = NodeifyPromise;"]},"metadata":{},"sourceType":"script"}