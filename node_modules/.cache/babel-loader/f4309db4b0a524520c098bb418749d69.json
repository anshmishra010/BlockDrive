{"ast":null,"code":"'use strict';\n\nvar crypto = self.crypto || self.msCrypto;\n\nvar _require = require('buffer'),\n    Buffer = _require.Buffer; // limit of Crypto.getRandomValues()\n// https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues\n\n\nvar MAX_BYTES = 65536;\n\nfunction oldBrowser() {\n  throw new Error('Secure random number generation is not supported by this browser.\\nUse Chrome, Firefox or Internet Explorer 11');\n}\n\nif (crypto && crypto.getRandomValues) {\n  module.exports = randomBytes;\n} else {\n  module.exports = oldBrowser;\n}\n\nfunction randomBytes(size) {\n  var bytes = new Uint8Array(size);\n  var generated = 0;\n\n  if (size > 0) {\n    // getRandomValues fails on IE if size == 0\n    if (size > MAX_BYTES) {\n      while (generated < size) {\n        if (generated + MAX_BYTES > size) {\n          crypto.getRandomValues(bytes.subarray(generated, generated + (size - generated)));\n          generated += size - generated;\n        } else {\n          crypto.getRandomValues(bytes.subarray(generated, generated + MAX_BYTES));\n          generated += MAX_BYTES;\n        }\n      }\n    } else {\n      crypto.getRandomValues(bytes);\n    }\n  }\n\n  return Buffer.from(bytes);\n}","map":{"version":3,"sources":["C:/Users/anshm/blockdrive/node_modules/iso-random-stream/src/random.browser.js"],"names":["crypto","self","msCrypto","require","Buffer","MAX_BYTES","oldBrowser","Error","getRandomValues","module","exports","randomBytes","size","bytes","Uint8Array","generated","subarray","from"],"mappings":"AAAA;;AAEA,IAAMA,MAAM,GAAGC,IAAI,CAACD,MAAL,IAAeC,IAAI,CAACC,QAAnC;;eACmBC,OAAO,CAAC,QAAD,C;IAAlBC,M,YAAAA,M,EAER;AACA;;;AACA,IAAMC,SAAS,GAAG,KAAlB;;AAEA,SAASC,UAAT,GAAsB;AAClB,QAAM,IAAIC,KAAJ,CACF,gHADE,CAAN;AAGH;;AAED,IAAIP,MAAM,IAAIA,MAAM,CAACQ,eAArB,EAAsC;AAClCC,EAAAA,MAAM,CAACC,OAAP,GAAiBC,WAAjB;AACH,CAFD,MAEO;AACHF,EAAAA,MAAM,CAACC,OAAP,GAAiBJ,UAAjB;AACH;;AAED,SAASK,WAAT,CAAqBC,IAArB,EAA2B;AACvB,MAAMC,KAAK,GAAG,IAAIC,UAAJ,CAAeF,IAAf,CAAd;AACA,MAAIG,SAAS,GAAG,CAAhB;;AAEA,MAAIH,IAAI,GAAG,CAAX,EAAc;AACV;AACA,QAAIA,IAAI,GAAGP,SAAX,EAAsB;AAClB,aAAOU,SAAS,GAAGH,IAAnB,EAAyB;AACrB,YAAIG,SAAS,GAAGV,SAAZ,GAAwBO,IAA5B,EAAkC;AAC9BZ,UAAAA,MAAM,CAACQ,eAAP,CACIK,KAAK,CAACG,QAAN,CAAeD,SAAf,EAA0BA,SAAS,IAAIH,IAAI,GAAGG,SAAX,CAAnC,CADJ;AAGAA,UAAAA,SAAS,IAAIH,IAAI,GAAGG,SAApB;AACH,SALD,MAKO;AACHf,UAAAA,MAAM,CAACQ,eAAP,CACIK,KAAK,CAACG,QAAN,CAAeD,SAAf,EAA0BA,SAAS,GAAGV,SAAtC,CADJ;AAGAU,UAAAA,SAAS,IAAIV,SAAb;AACH;AACJ;AACJ,KAdD,MAcO;AACHL,MAAAA,MAAM,CAACQ,eAAP,CAAuBK,KAAvB;AACH;AACJ;;AAED,SAAOT,MAAM,CAACa,IAAP,CAAYJ,KAAZ,CAAP;AACH","sourcesContent":["'use strict';\n\nconst crypto = self.crypto || self.msCrypto;\nconst { Buffer } = require('buffer');\n\n// limit of Crypto.getRandomValues()\n// https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues\nconst MAX_BYTES = 65536;\n\nfunction oldBrowser() {\n    throw new Error(\n        'Secure random number generation is not supported by this browser.\\nUse Chrome, Firefox or Internet Explorer 11'\n    );\n}\n\nif (crypto && crypto.getRandomValues) {\n    module.exports = randomBytes;\n} else {\n    module.exports = oldBrowser;\n}\n\nfunction randomBytes(size) {\n    const bytes = new Uint8Array(size);\n    let generated = 0;\n\n    if (size > 0) {\n        // getRandomValues fails on IE if size == 0\n        if (size > MAX_BYTES) {\n            while (generated < size) {\n                if (generated + MAX_BYTES > size) {\n                    crypto.getRandomValues(\n                        bytes.subarray(generated, generated + (size - generated))\n                    );\n                    generated += size - generated;\n                } else {\n                    crypto.getRandomValues(\n                        bytes.subarray(generated, generated + MAX_BYTES)\n                    );\n                    generated += MAX_BYTES;\n                }\n            }\n        } else {\n            crypto.getRandomValues(bytes);\n        }\n    }\n\n    return Buffer.from(bytes);\n}\n"]},"metadata":{},"sourceType":"script"}