{"ast":null,"code":"'use strict';\n\nvar varint = require('varint');\n\nvar svarint = require('signed-varint');\n\nvar _require = require('buffer'),\n    Buffer = _require.Buffer;\n\nvar encoder = function encoder(type, encode, decode, encodingLength) {\n  encode.bytes = decode.bytes = 0;\n  return {\n    type: type,\n    encode: encode,\n    decode: decode,\n    encodingLength: encodingLength\n  };\n};\n\nexports.make = encoder;\n\nexports.bytes = function () {\n  var bufferLength = function bufferLength(val) {\n    return Buffer.isBuffer(val) ? val.length : Buffer.byteLength(val);\n  };\n\n  var encodingLength = function encodingLength(val) {\n    var len = bufferLength(val);\n    return varint.encodingLength(len) + len;\n  };\n\n  var encode = function encode(val, buffer, offset) {\n    var oldOffset = offset;\n    var len = bufferLength(val);\n    varint.encode(len, buffer, offset);\n    offset += varint.encode.bytes;\n    if (val instanceof Uint8Array) buffer.set(val, offset);else buffer.write(val, offset, len);\n    offset += len;\n    encode.bytes = offset - oldOffset;\n    return buffer;\n  };\n\n  var decode = function decode(buffer, offset) {\n    var oldOffset = offset;\n    var len = varint.decode(buffer, offset);\n    offset += varint.decode.bytes;\n    var val = buffer.slice(offset, offset + len);\n    offset += val.length;\n    decode.bytes = offset - oldOffset;\n    return val;\n  };\n\n  return encoder(2, encode, decode, encodingLength);\n}();\n\nexports.string = function () {\n  var encodingLength = function encodingLength(val) {\n    var len = Buffer.byteLength(val);\n    return varint.encodingLength(len) + len;\n  };\n\n  var encode = function encode(val, buffer, offset) {\n    var oldOffset = offset;\n    var len = Buffer.byteLength(val);\n    varint.encode(len, buffer, offset, 'utf-8');\n    offset += varint.encode.bytes;\n    buffer.write(val, offset, len);\n    offset += len;\n    encode.bytes = offset - oldOffset;\n    return buffer;\n  };\n\n  var decode = function decode(buffer, offset) {\n    var oldOffset = offset;\n    var len = varint.decode(buffer, offset);\n    offset += varint.decode.bytes;\n    var val = buffer.toString('utf-8', offset, offset + len);\n    offset += len;\n    decode.bytes = offset - oldOffset;\n    return val;\n  };\n\n  return encoder(2, encode, decode, encodingLength);\n}();\n\nexports.bool = function () {\n  var encodingLength = function encodingLength(val) {\n    return 1;\n  };\n\n  var encode = function encode(val, buffer, offset) {\n    buffer[offset] = val ? 1 : 0;\n    encode.bytes = 1;\n    return buffer;\n  };\n\n  var decode = function decode(buffer, offset) {\n    var bool = buffer[offset] > 0;\n    decode.bytes = 1;\n    return bool;\n  };\n\n  return encoder(0, encode, decode, encodingLength);\n}();\n\nexports.int32 = function () {\n  var decode = function decode(buffer, offset) {\n    var val = varint.decode(buffer, offset);\n    decode.bytes = varint.decode.bytes;\n    return val > 2147483647 ? val - 4294967296 : val;\n  };\n\n  var encode = function encode(val, buffer, offset) {\n    varint.encode(val < 0 ? val + 4294967296 : val, buffer, offset);\n    encode.bytes = varint.encode.bytes;\n    return buffer;\n  };\n\n  var encodingLength = function encodingLength(val) {\n    return varint.encodingLength(val < 0 ? val + 4294967296 : val);\n  };\n\n  return encoder(0, encode, decode, encodingLength);\n}();\n\nexports.int64 = function () {\n  var decode = function decode(buffer, offset) {\n    var val = varint.decode(buffer, offset);\n\n    if (val >= Math.pow(2, 63)) {\n      var limit = 9;\n\n      while (buffer[offset + limit - 1] === 0xff) {\n        limit--;\n      }\n\n      limit = limit || 9;\n      var subset = Buffer.allocUnsafe(limit);\n      buffer.copy(subset, 0, offset, offset + limit);\n      subset[limit - 1] = subset[limit - 1] & 0x7f;\n      val = -1 * varint.decode(subset, 0);\n      decode.bytes = 10;\n    } else {\n      decode.bytes = varint.decode.bytes;\n    }\n\n    return val;\n  };\n\n  var encode = function encode(val, buffer, offset) {\n    if (val < 0) {\n      var last = offset + 9;\n      varint.encode(val * -1, buffer, offset);\n      offset += varint.encode.bytes - 1;\n      buffer[offset] = buffer[offset] | 0x80;\n\n      while (offset < last - 1) {\n        offset++;\n        buffer[offset] = 0xff;\n      }\n\n      buffer[last] = 0x01;\n      encode.bytes = 10;\n    } else {\n      varint.encode(val, buffer, offset);\n      encode.bytes = varint.encode.bytes;\n    }\n\n    return buffer;\n  };\n\n  var encodingLength = function encodingLength(val) {\n    return val < 0 ? 10 : varint.encodingLength(val);\n  };\n\n  return encoder(0, encode, decode, encodingLength);\n}();\n\nexports.sint32 = exports.sint64 = function () {\n  return encoder(0, svarint.encode, svarint.decode, svarint.encodingLength);\n}();\n\nexports.uint32 = exports.uint64 = exports.enum = exports.varint = function () {\n  return encoder(0, varint.encode, varint.decode, varint.encodingLength);\n}(); // we cannot represent these in javascript so we just use buffers\n\n\nexports.fixed64 = exports.sfixed64 = function () {\n  var encodingLength = function encodingLength(val) {\n    return 8;\n  };\n\n  var encode = function encode(val, buffer, offset) {\n    buffer.set(val, offset);\n    encode.bytes = 8;\n    return buffer;\n  };\n\n  var decode = function decode(buffer, offset) {\n    var val = buffer.slice(offset, offset + 8);\n    decode.bytes = 8;\n    return val;\n  };\n\n  return encoder(1, encode, decode, encodingLength);\n}();\n\nexports.double = function () {\n  var encodingLength = function encodingLength(val) {\n    return 8;\n  };\n\n  var encode = function encode(val, buffer, offset) {\n    buffer.writeDoubleLE(val, offset);\n    encode.bytes = 8;\n    return buffer;\n  };\n\n  var decode = function decode(buffer, offset) {\n    var val = buffer.readDoubleLE(offset);\n    decode.bytes = 8;\n    return val;\n  };\n\n  return encoder(1, encode, decode, encodingLength);\n}();\n\nexports.fixed32 = function () {\n  var encodingLength = function encodingLength(val) {\n    return 4;\n  };\n\n  var encode = function encode(val, buffer, offset) {\n    buffer.writeUInt32LE(val, offset);\n    encode.bytes = 4;\n    return buffer;\n  };\n\n  var decode = function decode(buffer, offset) {\n    var val = buffer.readUInt32LE(offset);\n    decode.bytes = 4;\n    return val;\n  };\n\n  return encoder(5, encode, decode, encodingLength);\n}();\n\nexports.sfixed32 = function () {\n  var encodingLength = function encodingLength(val) {\n    return 4;\n  };\n\n  var encode = function encode(val, buffer, offset) {\n    buffer.writeInt32LE(val, offset);\n    encode.bytes = 4;\n    return buffer;\n  };\n\n  var decode = function decode(buffer, offset) {\n    var val = buffer.readInt32LE(offset);\n    decode.bytes = 4;\n    return val;\n  };\n\n  return encoder(5, encode, decode, encodingLength);\n}();\n\nexports.float = function () {\n  var encodingLength = function encodingLength(val) {\n    return 4;\n  };\n\n  var encode = function encode(val, buffer, offset) {\n    buffer.writeFloatLE(val, offset);\n    encode.bytes = 4;\n    return buffer;\n  };\n\n  var decode = function decode(buffer, offset) {\n    var val = buffer.readFloatLE(offset);\n    decode.bytes = 4;\n    return val;\n  };\n\n  return encoder(5, encode, decode, encodingLength);\n}();","map":{"version":3,"sources":["C:/Users/anshm/blockdrive/node_modules/protons/src/compile/encodings.js"],"names":["varint","require","svarint","Buffer","encoder","type","encode","decode","encodingLength","bytes","exports","make","bufferLength","val","isBuffer","length","byteLength","len","buffer","offset","oldOffset","Uint8Array","set","write","slice","string","toString","bool","int32","int64","Math","pow","limit","subset","allocUnsafe","copy","last","sint32","sint64","uint32","uint64","enum","fixed64","sfixed64","double","writeDoubleLE","readDoubleLE","fixed32","writeUInt32LE","readUInt32LE","sfixed32","writeInt32LE","readInt32LE","float","writeFloatLE","readFloatLE"],"mappings":"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","sourcesContent":["'use strict'\n\nvar varint = require('varint')\nvar svarint = require('signed-varint')\nconst { Buffer } = require('buffer')\n\nvar encoder = function (type, encode, decode, encodingLength) {\n  encode.bytes = decode.bytes = 0\n\n  return {\n    type: type,\n    encode: encode,\n    decode: decode,\n    encodingLength: encodingLength\n  }\n}\n\nexports.make = encoder\n\nexports.bytes = (function () {\n  var bufferLength = function (val) {\n    return Buffer.isBuffer(val) ? val.length : Buffer.byteLength(val)\n  }\n\n  var encodingLength = function (val) {\n    var len = bufferLength(val)\n    return varint.encodingLength(len) + len\n  }\n\n  var encode = function (val, buffer, offset) {\n    var oldOffset = offset\n    var len = bufferLength(val)\n\n    varint.encode(len, buffer, offset)\n    offset += varint.encode.bytes\n\n    if (val instanceof Uint8Array) buffer.set(val, offset)\n    else buffer.write(val, offset, len)\n    offset += len\n\n    encode.bytes = offset - oldOffset\n    return buffer\n  }\n\n  var decode = function (buffer, offset) {\n    var oldOffset = offset\n\n    var len = varint.decode(buffer, offset)\n    offset += varint.decode.bytes\n\n    var val = buffer.slice(offset, offset + len)\n    offset += val.length\n\n    decode.bytes = offset - oldOffset\n    return val\n  }\n\n  return encoder(2, encode, decode, encodingLength)\n})()\n\nexports.string = (function () {\n  var encodingLength = function (val) {\n    var len = Buffer.byteLength(val)\n    return varint.encodingLength(len) + len\n  }\n\n  var encode = function (val, buffer, offset) {\n    var oldOffset = offset\n    var len = Buffer.byteLength(val)\n\n    varint.encode(len, buffer, offset, 'utf-8')\n    offset += varint.encode.bytes\n\n    buffer.write(val, offset, len)\n    offset += len\n\n    encode.bytes = offset - oldOffset\n    return buffer\n  }\n\n  var decode = function (buffer, offset) {\n    var oldOffset = offset\n\n    var len = varint.decode(buffer, offset)\n    offset += varint.decode.bytes\n\n    var val = buffer.toString('utf-8', offset, offset + len)\n    offset += len\n\n    decode.bytes = offset - oldOffset\n    return val\n  }\n\n  return encoder(2, encode, decode, encodingLength)\n})()\n\nexports.bool = (function () {\n  var encodingLength = function (val) {\n    return 1\n  }\n\n  var encode = function (val, buffer, offset) {\n    buffer[offset] = val ? 1 : 0\n    encode.bytes = 1\n    return buffer\n  }\n\n  var decode = function (buffer, offset) {\n    var bool = buffer[offset] > 0\n    decode.bytes = 1\n    return bool\n  }\n\n  return encoder(0, encode, decode, encodingLength)\n})()\n\nexports.int32 = (function () {\n  var decode = function (buffer, offset) {\n    var val = varint.decode(buffer, offset)\n    decode.bytes = varint.decode.bytes\n    return val > 2147483647 ? val - 4294967296 : val\n  }\n\n  var encode = function (val, buffer, offset) {\n    varint.encode(val < 0 ? val + 4294967296 : val, buffer, offset)\n    encode.bytes = varint.encode.bytes\n    return buffer\n  }\n\n  var encodingLength = function (val) {\n    return varint.encodingLength(val < 0 ? val + 4294967296 : val)\n  }\n\n  return encoder(0, encode, decode, encodingLength)\n})()\n\nexports.int64 = (function () {\n  var decode = function (buffer, offset) {\n    var val = varint.decode(buffer, offset)\n    if (val >= Math.pow(2, 63)) {\n      var limit = 9\n      while (buffer[offset + limit - 1] === 0xff) limit--\n      limit = limit || 9\n      var subset = Buffer.allocUnsafe(limit)\n      buffer.copy(subset, 0, offset, offset + limit)\n      subset[limit - 1] = subset[limit - 1] & 0x7f\n      val = -1 * varint.decode(subset, 0)\n      decode.bytes = 10\n    } else {\n      decode.bytes = varint.decode.bytes\n    }\n    return val\n  }\n\n  var encode = function (val, buffer, offset) {\n    if (val < 0) {\n      var last = offset + 9\n      varint.encode(val * -1, buffer, offset)\n      offset += varint.encode.bytes - 1\n      buffer[offset] = buffer[offset] | 0x80\n      while (offset < last - 1) {\n        offset++\n        buffer[offset] = 0xff\n      }\n      buffer[last] = 0x01\n      encode.bytes = 10\n    } else {\n      varint.encode(val, buffer, offset)\n      encode.bytes = varint.encode.bytes\n    }\n    return buffer\n  }\n\n  var encodingLength = function (val) {\n    return val < 0 ? 10 : varint.encodingLength(val)\n  }\n\n  return encoder(0, encode, decode, encodingLength)\n})()\n\nexports.sint32 =\nexports.sint64 = (function () {\n  return encoder(0, svarint.encode, svarint.decode, svarint.encodingLength)\n})()\n\nexports.uint32 =\nexports.uint64 =\nexports.enum =\nexports.varint = (function () {\n  return encoder(0, varint.encode, varint.decode, varint.encodingLength)\n})()\n\n// we cannot represent these in javascript so we just use buffers\nexports.fixed64 =\nexports.sfixed64 = (function () {\n  var encodingLength = function (val) {\n    return 8\n  }\n\n  var encode = function (val, buffer, offset) {\n    buffer.set(val, offset)\n    encode.bytes = 8\n    return buffer\n  }\n\n  var decode = function (buffer, offset) {\n    var val = buffer.slice(offset, offset + 8)\n    decode.bytes = 8\n    return val\n  }\n\n  return encoder(1, encode, decode, encodingLength)\n})()\n\nexports.double = (function () {\n  var encodingLength = function (val) {\n    return 8\n  }\n\n  var encode = function (val, buffer, offset) {\n    buffer.writeDoubleLE(val, offset)\n    encode.bytes = 8\n    return buffer\n  }\n\n  var decode = function (buffer, offset) {\n    var val = buffer.readDoubleLE(offset)\n    decode.bytes = 8\n    return val\n  }\n\n  return encoder(1, encode, decode, encodingLength)\n})()\n\nexports.fixed32 = (function () {\n  var encodingLength = function (val) {\n    return 4\n  }\n\n  var encode = function (val, buffer, offset) {\n    buffer.writeUInt32LE(val, offset)\n    encode.bytes = 4\n    return buffer\n  }\n\n  var decode = function (buffer, offset) {\n    var val = buffer.readUInt32LE(offset)\n    decode.bytes = 4\n    return val\n  }\n\n  return encoder(5, encode, decode, encodingLength)\n})()\n\nexports.sfixed32 = (function () {\n  var encodingLength = function (val) {\n    return 4\n  }\n\n  var encode = function (val, buffer, offset) {\n    buffer.writeInt32LE(val, offset)\n    encode.bytes = 4\n    return buffer\n  }\n\n  var decode = function (buffer, offset) {\n    var val = buffer.readInt32LE(offset)\n    decode.bytes = 4\n    return val\n  }\n\n  return encoder(5, encode, decode, encodingLength)\n})()\n\nexports.float = (function () {\n  var encodingLength = function (val) {\n    return 4\n  }\n\n  var encode = function (val, buffer, offset) {\n    buffer.writeFloatLE(val, offset)\n    encode.bytes = 4\n    return buffer\n  }\n\n  var decode = function (buffer, offset) {\n    var val = buffer.readFloatLE(offset)\n    decode.bytes = 4\n    return val\n  }\n\n  return encoder(5, encode, decode, encodingLength)\n})()\n"]},"metadata":{},"sourceType":"script"}